{"ast":null,"code":"/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nvar _classCallCheck = require(\"/Users/mac/Desktop/projects/izzielau.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/mac/Desktop/projects/izzielau.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleLinkService = exports.PDFLinkService = void 0;\n\nvar _ui_utils = require(\"./ui_utils.js\");\n\nvar PDFLinkService = /*#__PURE__*/function () {\n  function PDFLinkService() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        eventBus = _ref.eventBus,\n        _ref$externalLinkTarg = _ref.externalLinkTarget,\n        externalLinkTarget = _ref$externalLinkTarg === void 0 ? null : _ref$externalLinkTarg,\n        _ref$externalLinkRel = _ref.externalLinkRel,\n        externalLinkRel = _ref$externalLinkRel === void 0 ? null : _ref$externalLinkRel,\n        _ref$externalLinkEnab = _ref.externalLinkEnabled,\n        externalLinkEnabled = _ref$externalLinkEnab === void 0 ? true : _ref$externalLinkEnab,\n        _ref$ignoreDestinatio = _ref.ignoreDestinationZoom,\n        ignoreDestinationZoom = _ref$ignoreDestinatio === void 0 ? false : _ref$ignoreDestinatio;\n\n    _classCallCheck(this, PDFLinkService);\n\n    this.eventBus = eventBus || (0, _ui_utils.getGlobalEventBus)();\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this.externalLinkEnabled = externalLinkEnabled;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n    this._pagesRefCache = null;\n  }\n\n  _createClass(PDFLinkService, [{\n    key: \"setDocument\",\n    value: function setDocument(pdfDocument) {\n      var baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      this.baseUrl = baseUrl;\n      this.pdfDocument = pdfDocument;\n      this._pagesRefCache = Object.create(null);\n    }\n  }, {\n    key: \"setViewer\",\n    value: function setViewer(pdfViewer) {\n      this.pdfViewer = pdfViewer;\n    }\n  }, {\n    key: \"setHistory\",\n    value: function setHistory(pdfHistory) {\n      this.pdfHistory = pdfHistory;\n    }\n  }, {\n    key: \"navigateTo\",\n    value: function navigateTo(dest) {\n      var _this = this;\n\n      var goToDestination = function goToDestination(_ref2) {\n        var namedDest = _ref2.namedDest,\n            explicitDest = _ref2.explicitDest;\n        var destRef = explicitDest[0];\n        var pageNumber;\n\n        if (destRef instanceof Object) {\n          pageNumber = _this._cachedPageNumber(destRef);\n\n          if (pageNumber === null) {\n            _this.pdfDocument.getPageIndex(destRef).then(function (pageIndex) {\n              _this.cachePageRef(pageIndex + 1, destRef);\n\n              goToDestination({\n                namedDest: namedDest,\n                explicitDest: explicitDest\n              });\n            }).catch(function () {\n              console.error(\"PDFLinkService.navigateTo: \\\"\".concat(destRef, \"\\\" is not \") + \"a valid page reference, for dest=\\\"\".concat(dest, \"\\\".\"));\n            });\n\n            return;\n          }\n        } else if (Number.isInteger(destRef)) {\n          pageNumber = destRef + 1;\n        } else {\n          console.error(\"PDFLinkService.navigateTo: \\\"\".concat(destRef, \"\\\" is not \") + \"a valid destination reference, for dest=\\\"\".concat(dest, \"\\\".\"));\n          return;\n        }\n\n        if (!pageNumber || pageNumber < 1 || pageNumber > _this.pagesCount) {\n          console.error(\"PDFLinkService.navigateTo: \\\"\".concat(pageNumber, \"\\\" is not \") + \"a valid page number, for dest=\\\"\".concat(dest, \"\\\".\"));\n          return;\n        }\n\n        if (_this.pdfHistory) {\n          _this.pdfHistory.pushCurrentPosition();\n\n          _this.pdfHistory.push({\n            namedDest: namedDest,\n            explicitDest: explicitDest,\n            pageNumber: pageNumber\n          });\n        }\n\n        _this.pdfViewer.scrollPageIntoView({\n          pageNumber: pageNumber,\n          destArray: explicitDest,\n          ignoreDestinationZoom: _this._ignoreDestinationZoom\n        });\n      };\n\n      new Promise(function (resolve, reject) {\n        if (typeof dest === \"string\") {\n          _this.pdfDocument.getDestination(dest).then(function (destArray) {\n            resolve({\n              namedDest: dest,\n              explicitDest: destArray\n            });\n          });\n\n          return;\n        }\n\n        resolve({\n          namedDest: \"\",\n          explicitDest: dest\n        });\n      }).then(function (data) {\n        if (!Array.isArray(data.explicitDest)) {\n          console.error(\"PDFLinkService.navigateTo: \\\"\".concat(data.explicitDest, \"\\\" is\") + \" not a valid destination array, for dest=\\\"\".concat(dest, \"\\\".\"));\n          return;\n        }\n\n        goToDestination(data);\n      });\n    }\n  }, {\n    key: \"getDestinationHash\",\n    value: function getDestinationHash(dest) {\n      if (typeof dest === \"string\") {\n        return this.getAnchorUrl(\"#\" + escape(dest));\n      }\n\n      if (Array.isArray(dest)) {\n        var str = JSON.stringify(dest);\n        return this.getAnchorUrl(\"#\" + escape(str));\n      }\n\n      return this.getAnchorUrl(\"\");\n    }\n  }, {\n    key: \"getAnchorUrl\",\n    value: function getAnchorUrl(anchor) {\n      return (this.baseUrl || \"\") + anchor;\n    }\n  }, {\n    key: \"setHash\",\n    value: function setHash(hash) {\n      var pageNumber, dest;\n\n      if (hash.includes(\"=\")) {\n        var params = (0, _ui_utils.parseQueryString)(hash);\n\n        if (\"search\" in params) {\n          this.eventBus.dispatch(\"findfromurlhash\", {\n            source: this,\n            query: params[\"search\"].replace(/\"/g, \"\"),\n            phraseSearch: params[\"phrase\"] === \"true\"\n          });\n        }\n\n        if (\"nameddest\" in params) {\n          this.navigateTo(params.nameddest);\n          return;\n        }\n\n        if (\"page\" in params) {\n          pageNumber = params.page | 0 || 1;\n        }\n\n        if (\"zoom\" in params) {\n          var zoomArgs = params.zoom.split(\",\");\n          var zoomArg = zoomArgs[0];\n          var zoomArgNumber = parseFloat(zoomArg);\n\n          if (!zoomArg.includes(\"Fit\")) {\n            dest = [null, {\n              name: \"XYZ\"\n            }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\n          } else {\n            if (zoomArg === \"Fit\" || zoomArg === \"FitB\") {\n              dest = [null, {\n                name: zoomArg\n              }];\n            } else if (zoomArg === \"FitH\" || zoomArg === \"FitBH\" || zoomArg === \"FitV\" || zoomArg === \"FitBV\") {\n              dest = [null, {\n                name: zoomArg\n              }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\n            } else if (zoomArg === \"FitR\") {\n              if (zoomArgs.length !== 5) {\n                console.error('PDFLinkService.setHash: Not enough parameters for \"FitR\".');\n              } else {\n                dest = [null, {\n                  name: zoomArg\n                }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\n              }\n            } else {\n              console.error(\"PDFLinkService.setHash: \\\"\".concat(zoomArg, \"\\\" is not \") + \"a valid zoom value.\");\n            }\n          }\n        }\n\n        if (dest) {\n          this.pdfViewer.scrollPageIntoView({\n            pageNumber: pageNumber || this.page,\n            destArray: dest,\n            allowNegativeOffset: true\n          });\n        } else if (pageNumber) {\n          this.page = pageNumber;\n        }\n\n        if (\"pagemode\" in params) {\n          this.eventBus.dispatch(\"pagemode\", {\n            source: this,\n            mode: params.pagemode\n          });\n        }\n      } else {\n        dest = unescape(hash);\n\n        try {\n          dest = JSON.parse(dest);\n\n          if (!Array.isArray(dest)) {\n            dest = dest.toString();\n          }\n        } catch (ex) {}\n\n        if (typeof dest === \"string\" || isValidExplicitDestination(dest)) {\n          this.navigateTo(dest);\n          return;\n        }\n\n        console.error(\"PDFLinkService.setHash: \\\"\".concat(unescape(hash), \"\\\" is not \") + \"a valid destination.\");\n      }\n    }\n  }, {\n    key: \"executeNamedAction\",\n    value: function executeNamedAction(action) {\n      switch (action) {\n        case \"GoBack\":\n          if (this.pdfHistory) {\n            this.pdfHistory.back();\n          }\n\n          break;\n\n        case \"GoForward\":\n          if (this.pdfHistory) {\n            this.pdfHistory.forward();\n          }\n\n          break;\n\n        case \"NextPage\":\n          if (this.page < this.pagesCount) {\n            this.page++;\n          }\n\n          break;\n\n        case \"PrevPage\":\n          if (this.page > 1) {\n            this.page--;\n          }\n\n          break;\n\n        case \"LastPage\":\n          this.page = this.pagesCount;\n          break;\n\n        case \"FirstPage\":\n          this.page = 1;\n          break;\n\n        default:\n          break;\n      }\n\n      this.eventBus.dispatch(\"namedaction\", {\n        source: this,\n        action: action\n      });\n    }\n  }, {\n    key: \"cachePageRef\",\n    value: function cachePageRef(pageNum, pageRef) {\n      if (!pageRef) {\n        return;\n      }\n\n      var refStr = pageRef.gen === 0 ? \"\".concat(pageRef.num, \"R\") : \"\".concat(pageRef.num, \"R\").concat(pageRef.gen);\n      this._pagesRefCache[refStr] = pageNum;\n    }\n  }, {\n    key: \"_cachedPageNumber\",\n    value: function _cachedPageNumber(pageRef) {\n      var refStr = pageRef.gen === 0 ? \"\".concat(pageRef.num, \"R\") : \"\".concat(pageRef.num, \"R\").concat(pageRef.gen);\n      return this._pagesRefCache && this._pagesRefCache[refStr] || null;\n    }\n  }, {\n    key: \"isPageVisible\",\n    value: function isPageVisible(pageNumber) {\n      return this.pdfViewer.isPageVisible(pageNumber);\n    }\n  }, {\n    key: \"pagesCount\",\n    get: function get() {\n      return this.pdfDocument ? this.pdfDocument.numPages : 0;\n    }\n  }, {\n    key: \"page\",\n    get: function get() {\n      return this.pdfViewer.currentPageNumber;\n    },\n    set: function set(value) {\n      this.pdfViewer.currentPageNumber = value;\n    }\n  }, {\n    key: \"rotation\",\n    get: function get() {\n      return this.pdfViewer.pagesRotation;\n    },\n    set: function set(value) {\n      this.pdfViewer.pagesRotation = value;\n    }\n  }]);\n\n  return PDFLinkService;\n}();\n\nexports.PDFLinkService = PDFLinkService;\n\nfunction isValidExplicitDestination(dest) {\n  if (!Array.isArray(dest)) {\n    return false;\n  }\n\n  var destLength = dest.length;\n\n  if (destLength < 2) {\n    return false;\n  }\n\n  var page = dest[0];\n\n  if (!(typeof page === \"object\" && Number.isInteger(page.num) && Number.isInteger(page.gen)) && !(Number.isInteger(page) && page >= 0)) {\n    return false;\n  }\n\n  var zoom = dest[1];\n\n  if (!(typeof zoom === \"object\" && typeof zoom.name === \"string\")) {\n    return false;\n  }\n\n  var allowNull = true;\n\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (destLength !== 5) {\n        return false;\n      }\n\n      break;\n\n    case \"Fit\":\n    case \"FitB\":\n      return destLength === 2;\n\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (destLength !== 3) {\n        return false;\n      }\n\n      break;\n\n    case \"FitR\":\n      if (destLength !== 6) {\n        return false;\n      }\n\n      allowNull = false;\n      break;\n\n    default:\n      return false;\n  }\n\n  for (var i = 2; i < destLength; i++) {\n    var param = dest[i];\n\n    if (!(typeof param === \"number\" || allowNull && param === null)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar SimpleLinkService = /*#__PURE__*/function () {\n  function SimpleLinkService() {\n    _classCallCheck(this, SimpleLinkService);\n\n    this.externalLinkTarget = null;\n    this.externalLinkRel = null;\n    this.externalLinkEnabled = true;\n    this._ignoreDestinationZoom = false;\n  }\n\n  _createClass(SimpleLinkService, [{\n    key: \"navigateTo\",\n    value: function navigateTo(dest) {}\n  }, {\n    key: \"getDestinationHash\",\n    value: function getDestinationHash(dest) {\n      return \"#\";\n    }\n  }, {\n    key: \"getAnchorUrl\",\n    value: function getAnchorUrl(hash) {\n      return \"#\";\n    }\n  }, {\n    key: \"setHash\",\n    value: function setHash(hash) {}\n  }, {\n    key: \"executeNamedAction\",\n    value: function executeNamedAction(action) {}\n  }, {\n    key: \"cachePageRef\",\n    value: function cachePageRef(pageNum, pageRef) {}\n  }, {\n    key: \"isPageVisible\",\n    value: function isPageVisible(pageNumber) {\n      return true;\n    }\n  }, {\n    key: \"pagesCount\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"page\",\n    get: function get() {\n      return 0;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"rotation\",\n    get: function get() {\n      return 0;\n    },\n    set: function set(value) {}\n  }]);\n\n  return SimpleLinkService;\n}();\n\nexports.SimpleLinkService = SimpleLinkService;","map":{"version":3,"sources":["/Users/mac/Desktop/projects/izzielau.github.io/node_modules/pdfjs-dist/lib/web/pdf_link_service.js"],"names":["Object","defineProperty","exports","value","SimpleLinkService","PDFLinkService","_ui_utils","require","eventBus","externalLinkTarget","externalLinkRel","externalLinkEnabled","ignoreDestinationZoom","getGlobalEventBus","_ignoreDestinationZoom","baseUrl","pdfDocument","pdfViewer","pdfHistory","_pagesRefCache","create","dest","goToDestination","namedDest","explicitDest","destRef","pageNumber","_cachedPageNumber","getPageIndex","then","pageIndex","cachePageRef","catch","console","error","Number","isInteger","pagesCount","pushCurrentPosition","push","scrollPageIntoView","destArray","Promise","resolve","reject","getDestination","data","Array","isArray","getAnchorUrl","escape","str","JSON","stringify","anchor","hash","includes","params","parseQueryString","dispatch","source","query","replace","phraseSearch","navigateTo","nameddest","page","zoomArgs","zoom","split","zoomArg","zoomArgNumber","parseFloat","name","length","allowNegativeOffset","mode","pagemode","unescape","parse","toString","ex","isValidExplicitDestination","action","back","forward","pageNum","pageRef","refStr","gen","num","isPageVisible","numPages","currentPageNumber","pagesRotation","destLength","allowNull","i","param"],"mappings":"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","sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleLinkService = exports.PDFLinkService = void 0;\n\nvar _ui_utils = require(\"./ui_utils.js\");\n\nclass PDFLinkService {\n  constructor({\n    eventBus,\n    externalLinkTarget = null,\n    externalLinkRel = null,\n    externalLinkEnabled = true,\n    ignoreDestinationZoom = false\n  } = {}) {\n    this.eventBus = eventBus || (0, _ui_utils.getGlobalEventBus)();\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this.externalLinkEnabled = externalLinkEnabled;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n    this._pagesRefCache = null;\n  }\n\n  setDocument(pdfDocument, baseUrl = null) {\n    this.baseUrl = baseUrl;\n    this.pdfDocument = pdfDocument;\n    this._pagesRefCache = Object.create(null);\n  }\n\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n\n  setHistory(pdfHistory) {\n    this.pdfHistory = pdfHistory;\n  }\n\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  }\n\n  get page() {\n    return this.pdfViewer.currentPageNumber;\n  }\n\n  set page(value) {\n    this.pdfViewer.currentPageNumber = value;\n  }\n\n  get rotation() {\n    return this.pdfViewer.pagesRotation;\n  }\n\n  set rotation(value) {\n    this.pdfViewer.pagesRotation = value;\n  }\n\n  navigateTo(dest) {\n    const goToDestination = ({\n      namedDest,\n      explicitDest\n    }) => {\n      const destRef = explicitDest[0];\n      let pageNumber;\n\n      if (destRef instanceof Object) {\n        pageNumber = this._cachedPageNumber(destRef);\n\n        if (pageNumber === null) {\n          this.pdfDocument.getPageIndex(destRef).then(pageIndex => {\n            this.cachePageRef(pageIndex + 1, destRef);\n            goToDestination({\n              namedDest,\n              explicitDest\n            });\n          }).catch(() => {\n            console.error(`PDFLinkService.navigateTo: \"${destRef}\" is not ` + `a valid page reference, for dest=\"${dest}\".`);\n          });\n          return;\n        }\n      } else if (Number.isInteger(destRef)) {\n        pageNumber = destRef + 1;\n      } else {\n        console.error(`PDFLinkService.navigateTo: \"${destRef}\" is not ` + `a valid destination reference, for dest=\"${dest}\".`);\n        return;\n      }\n\n      if (!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount) {\n        console.error(`PDFLinkService.navigateTo: \"${pageNumber}\" is not ` + `a valid page number, for dest=\"${dest}\".`);\n        return;\n      }\n\n      if (this.pdfHistory) {\n        this.pdfHistory.pushCurrentPosition();\n        this.pdfHistory.push({\n          namedDest,\n          explicitDest,\n          pageNumber\n        });\n      }\n\n      this.pdfViewer.scrollPageIntoView({\n        pageNumber,\n        destArray: explicitDest,\n        ignoreDestinationZoom: this._ignoreDestinationZoom\n      });\n    };\n\n    new Promise((resolve, reject) => {\n      if (typeof dest === \"string\") {\n        this.pdfDocument.getDestination(dest).then(destArray => {\n          resolve({\n            namedDest: dest,\n            explicitDest: destArray\n          });\n        });\n        return;\n      }\n\n      resolve({\n        namedDest: \"\",\n        explicitDest: dest\n      });\n    }).then(data => {\n      if (!Array.isArray(data.explicitDest)) {\n        console.error(`PDFLinkService.navigateTo: \"${data.explicitDest}\" is` + ` not a valid destination array, for dest=\"${dest}\".`);\n        return;\n      }\n\n      goToDestination(data);\n    });\n  }\n\n  getDestinationHash(dest) {\n    if (typeof dest === \"string\") {\n      return this.getAnchorUrl(\"#\" + escape(dest));\n    }\n\n    if (Array.isArray(dest)) {\n      const str = JSON.stringify(dest);\n      return this.getAnchorUrl(\"#\" + escape(str));\n    }\n\n    return this.getAnchorUrl(\"\");\n  }\n\n  getAnchorUrl(anchor) {\n    return (this.baseUrl || \"\") + anchor;\n  }\n\n  setHash(hash) {\n    let pageNumber, dest;\n\n    if (hash.includes(\"=\")) {\n      const params = (0, _ui_utils.parseQueryString)(hash);\n\n      if (\"search\" in params) {\n        this.eventBus.dispatch(\"findfromurlhash\", {\n          source: this,\n          query: params[\"search\"].replace(/\"/g, \"\"),\n          phraseSearch: params[\"phrase\"] === \"true\"\n        });\n      }\n\n      if (\"nameddest\" in params) {\n        this.navigateTo(params.nameddest);\n        return;\n      }\n\n      if (\"page\" in params) {\n        pageNumber = params.page | 0 || 1;\n      }\n\n      if (\"zoom\" in params) {\n        const zoomArgs = params.zoom.split(\",\");\n        const zoomArg = zoomArgs[0];\n        const zoomArgNumber = parseFloat(zoomArg);\n\n        if (!zoomArg.includes(\"Fit\")) {\n          dest = [null, {\n            name: \"XYZ\"\n          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\n        } else {\n          if (zoomArg === \"Fit\" || zoomArg === \"FitB\") {\n            dest = [null, {\n              name: zoomArg\n            }];\n          } else if (zoomArg === \"FitH\" || zoomArg === \"FitBH\" || zoomArg === \"FitV\" || zoomArg === \"FitBV\") {\n            dest = [null, {\n              name: zoomArg\n            }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\n          } else if (zoomArg === \"FitR\") {\n            if (zoomArgs.length !== 5) {\n              console.error('PDFLinkService.setHash: Not enough parameters for \"FitR\".');\n            } else {\n              dest = [null, {\n                name: zoomArg\n              }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\n            }\n          } else {\n            console.error(`PDFLinkService.setHash: \"${zoomArg}\" is not ` + \"a valid zoom value.\");\n          }\n        }\n      }\n\n      if (dest) {\n        this.pdfViewer.scrollPageIntoView({\n          pageNumber: pageNumber || this.page,\n          destArray: dest,\n          allowNegativeOffset: true\n        });\n      } else if (pageNumber) {\n        this.page = pageNumber;\n      }\n\n      if (\"pagemode\" in params) {\n        this.eventBus.dispatch(\"pagemode\", {\n          source: this,\n          mode: params.pagemode\n        });\n      }\n    } else {\n      dest = unescape(hash);\n\n      try {\n        dest = JSON.parse(dest);\n\n        if (!Array.isArray(dest)) {\n          dest = dest.toString();\n        }\n      } catch (ex) {}\n\n      if (typeof dest === \"string\" || isValidExplicitDestination(dest)) {\n        this.navigateTo(dest);\n        return;\n      }\n\n      console.error(`PDFLinkService.setHash: \"${unescape(hash)}\" is not ` + \"a valid destination.\");\n    }\n  }\n\n  executeNamedAction(action) {\n    switch (action) {\n      case \"GoBack\":\n        if (this.pdfHistory) {\n          this.pdfHistory.back();\n        }\n\n        break;\n\n      case \"GoForward\":\n        if (this.pdfHistory) {\n          this.pdfHistory.forward();\n        }\n\n        break;\n\n      case \"NextPage\":\n        if (this.page < this.pagesCount) {\n          this.page++;\n        }\n\n        break;\n\n      case \"PrevPage\":\n        if (this.page > 1) {\n          this.page--;\n        }\n\n        break;\n\n      case \"LastPage\":\n        this.page = this.pagesCount;\n        break;\n\n      case \"FirstPage\":\n        this.page = 1;\n        break;\n\n      default:\n        break;\n    }\n\n    this.eventBus.dispatch(\"namedaction\", {\n      source: this,\n      action\n    });\n  }\n\n  cachePageRef(pageNum, pageRef) {\n    if (!pageRef) {\n      return;\n    }\n\n    const refStr = pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;\n    this._pagesRefCache[refStr] = pageNum;\n  }\n\n  _cachedPageNumber(pageRef) {\n    const refStr = pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;\n    return this._pagesRefCache && this._pagesRefCache[refStr] || null;\n  }\n\n  isPageVisible(pageNumber) {\n    return this.pdfViewer.isPageVisible(pageNumber);\n  }\n\n}\n\nexports.PDFLinkService = PDFLinkService;\n\nfunction isValidExplicitDestination(dest) {\n  if (!Array.isArray(dest)) {\n    return false;\n  }\n\n  const destLength = dest.length;\n\n  if (destLength < 2) {\n    return false;\n  }\n\n  const page = dest[0];\n\n  if (!(typeof page === \"object\" && Number.isInteger(page.num) && Number.isInteger(page.gen)) && !(Number.isInteger(page) && page >= 0)) {\n    return false;\n  }\n\n  const zoom = dest[1];\n\n  if (!(typeof zoom === \"object\" && typeof zoom.name === \"string\")) {\n    return false;\n  }\n\n  let allowNull = true;\n\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (destLength !== 5) {\n        return false;\n      }\n\n      break;\n\n    case \"Fit\":\n    case \"FitB\":\n      return destLength === 2;\n\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (destLength !== 3) {\n        return false;\n      }\n\n      break;\n\n    case \"FitR\":\n      if (destLength !== 6) {\n        return false;\n      }\n\n      allowNull = false;\n      break;\n\n    default:\n      return false;\n  }\n\n  for (let i = 2; i < destLength; i++) {\n    const param = dest[i];\n\n    if (!(typeof param === \"number\" || allowNull && param === null)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nclass SimpleLinkService {\n  constructor() {\n    this.externalLinkTarget = null;\n    this.externalLinkRel = null;\n    this.externalLinkEnabled = true;\n    this._ignoreDestinationZoom = false;\n  }\n\n  get pagesCount() {\n    return 0;\n  }\n\n  get page() {\n    return 0;\n  }\n\n  set page(value) {}\n\n  get rotation() {\n    return 0;\n  }\n\n  set rotation(value) {}\n\n  navigateTo(dest) {}\n\n  getDestinationHash(dest) {\n    return \"#\";\n  }\n\n  getAnchorUrl(hash) {\n    return \"#\";\n  }\n\n  setHash(hash) {}\n\n  executeNamedAction(action) {}\n\n  cachePageRef(pageNum, pageRef) {}\n\n  isPageVisible(pageNumber) {\n    return true;\n  }\n\n}\n\nexports.SimpleLinkService = SimpleLinkService;"]},"metadata":{},"sourceType":"script"}